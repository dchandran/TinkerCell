INCLUDE_DIRECTORIES( BEFORE
    ${TINKERCELL_SOURCE_DIR}/ExternalCode/curl/include
    ${TINKERCELL_SOURCE_DIR}/ExternalCode/expat
	${TINKERCELL_SOURCE_DIR}/ExternalCode/expat/lib
	${TINKERCELL_SOURCE_DIR}/ExternalCode/raptor/src
	${TINKERCELL_SOURCE_DIR}/ExternalCode/raptor/librdfa
	${TINKERCELL_SOURCE_DIR}/ExternalCode/raptor/utils
)

#ADD_DEFINITIONS(-D__cplusplus)
ADD_DEFINITIONS(-DHAVE_CONFIG_H)
ADD_DEFINITIONS(-DLIBRDFA_IN_RAPTOR)
ADD_DEFINITIONS(-DRAPTOR_INTERNAL=1)
ADD_DEFINITIONS(-DRAPTOR_V2_EXPERIMENTAL=1)

IF(WIN32)
	ADD_DEFINITIONS(-DWIN32)
	IF (MINGW)
		ADD_DEFINITIONS(-D__MINGW32__)
	ELSE(MINGW)
		ADD_DEFINITIONS(-Dstrcasecmp=_stricmp)
		ADD_DEFINITIONS(-Dstrncasecmp=_strnicmp)
		ADD_DEFINITIONS(-Dstrtok_r=strtok_s)
		ADD_DEFINITIONS(-Dgettimeofday=timeGetTime)
	ENDIF(MINGW)
ELSE(WIN32)
	ADD_DEFINITIONS(-DXMLCALL)
ENDIF(WIN32)

FILE( GLOB RAPTOR_SRC src/*.c src/*.y librdfa/*.c)# utils/*.c)

ADD_DEFINITIONS(-DHAVE_EXPAT_CONFIG_H)
FILE( GLOB  EXPAT_SRC_FILES   ${TINKERCELL_SOURCE_DIR}/ExternalCode/expat/lib/*.c)
#SET_SOURCE_FILES_PROPERTIES(${RAPTOR_SRC}  PROPERTIES LANGUAGE CXX)

ADD_LIBRARY( raptor
  SHARED
#  STATIC
  ${RAPTOR_SRC} 
  ${EXPAT_SRC_FILES}
)

#SET_TARGET_PROPERTIES(raptor PROPERTIES LINKER_LANGUAGE CXX)

TARGET_LINK_LIBRARIES( raptor
   raptor
   libcurl
   expat
)

#----------------------------------
#  INSTALL libraptor in . (CPack)
#----------------------------------

IF ( WIN32 )
   INSTALL(TARGETS raptor DESTINATION bin/../)
ELSE ( WIN32 )
   INSTALL(TARGETS raptor LIBRARY DESTINATION bin/../)
ENDIF( WIN32 )

