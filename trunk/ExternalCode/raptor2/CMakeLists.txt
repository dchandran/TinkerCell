INCLUDE_DIRECTORIES( BEFORE
    ${TINKERCELL_SOURCE_DIR}/ExternalCode/curl/include
    ${TINKERCELL_SOURCE_DIR}/ExternalCode/expat
	${TINKERCELL_SOURCE_DIR}/ExternalCode/expat/lib
	${TINKERCELL_SOURCE_DIR}/ExternalCode/raptor2/src
	${TINKERCELL_SOURCE_DIR}/ExternalCode/raptor2/librdfa
	${TINKERCELL_SOURCE_DIR}/ExternalCode/raptor2/utils
)

#ADD_DEFINITIONS(-D__cplusplus)
ADD_DEFINITIONS(-DHAVE_CONFIG_H)
ADD_DEFINITIONS(-DLIBRDFA_IN_RAPTOR)
ADD_DEFINITIONS(-DRAPTOR_INTERNAL=1)

IF(WIN32)
	ADD_DEFINITIONS(-DWIN32)
	IF (MINGW)
		ADD_DEFINITIONS(-D__MINGW32__)
	ENDIF(MINGW)
ENDIF(WIN32)

FILE( GLOB RAPTOR_SRC src/*.c src/*.y utils/*.c librdfa/*.c)

#SET_SOURCE_FILES_PROPERTIES(${RAPTOR_SRC}  PROPERTIES LANGUAGE CXX)

ADD_LIBRARY( raptor2
  SHARED
#  STATIC
  ${RAPTOR_SRC} 
)

#SET_TARGET_PROPERTIES(raptor2 PROPERTIES LINKER_LANGUAGE CXX)

TARGET_LINK_LIBRARIES( raptor2
   raptor2
   libcurl
   expat
)

#----------------------------------
#  INSTALL libraptor in . (CPack)
#----------------------------------

IF ( WIN32 )
   INSTALL(TARGETS raptor2 DESTINATION bin/../)
ELSE ( WIN32 )
   INSTALL(TARGETS raptor2 LIBRARY DESTINATION bin/../)
ENDIF( WIN32 )

